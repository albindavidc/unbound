<%- include('../../views/partials/user/header') %>


<style>

    /* Fixed size for the main image container */
.product__details__pic__item {
    width: 100%; /* Adjust width as needed */
    max-width: 500px; /* Set a maximum width */
    height: 400px; /* Set a fixed height */
    overflow: hidden; /* Hide overflow */
    display: flex;
    align-items: center;
    justify-content: center;
}

.product__details__pic__item img {
    width: 100%;
    height: auto; /* Maintain aspect ratio */
    max-height: 100%;
    object-fit: cover; /* Ensure image covers the container without stretching */
}


</style>
<!-- Shop Details Section Begin -->
<section class="shop-details">
  <div class="product__details__pic">
    <div class="container">
      <div class="row">
        <div class="col-lg-12">
          <div class="product__details__breadcrumb">
            <a href="/">Home</a>
            <a href="/shop">Shop</a>
            <span>Product Details</span>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-lg-3 col-md-3">
          <ul class="nav nav-tabs" role="tablist">
            <!-- Primary Images -->
            <% product.primaryImages.forEach((image, index) => { %>
            <li class="nav-item">
              <a
                class="nav-link <%= index === 0 ? 'active' : '' %>"
                data-toggle="tab"
                href="#tabs-primary"
                role="tab"
                data-image-url="/uploads/images/<%= image.name %>"
              >
                <div
                  class="product__thumb__pic set-bg"
                  data-setbg="/uploads/images/<%= image.name %>"
                ></div>
              </a>
            </li>
            <% }); %>

            <!-- Secondary Images -->
            <% product.secondaryImages.forEach((image, index) => { %>
            <li class="nav-item">
              <a
                class="nav-link"
                data-toggle="tab"
                href="#tabs-<%= index + 1 %>"
                role="tab"
                data-image-url="/uploads/images/<%= image.name %>"
              >
                <div
                  class="product__thumb__pic set-bg"
                  data-setbg="/uploads/images/<%= image.name %>"
                ></div>
              </a>
            </li>
            <% }); %>
          </ul>
        </div>
        <div class="col-lg-9 col-md-9">
          <div class="tab-content">
            <!-- Main Image Container -->
            <div class="tab-pane active" id="tabs-primary" role="tabpanel">
              <div class="product__details__pic__item">
                <img
                  id="main-product-image"
                  src="/uploads/images/<%= product.primaryImages[0] ? product.primaryImages[0].name : product.secondaryImages[0].name %>"
                  alt="<%= product.name %>"
                />
              </div>
            </div>
            <% product.secondaryImages.forEach((image, index) => { %>
            <div class="tab-pane" id="tabs-<%= index + 1 %>" role="tabpanel">
              <div class="product__details__pic__item">
                <img
                  id="secondary-product-image-<%= index %>"
                  src="/uploads/images/<%= image.name %>"
                  alt="<%= product.name %>"
                />
              </div>
            </div>
            <% }); %>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="product__details__content">
    <div class="container">
      <div class="row d-flex justify-content-center">
        <div class="col-lg-8">
          <div class="product__details__text">
            <h4><%= product.name %></h4>
            <div class="rating">
              <% for (let i = 0; i < product.rating; i++) { %>
              <i class="fa fa-star"></i>
              <% } %> <% for (let i = product.rating; i < 5; i++) { %>
              <i class="fa fa-star-o"></i>
              <% } %>
            </div>
            <h3>₹<%= product.price %>.00</h3>
            <p><%= product.description %></p>
            <div class="product__details__option">
              <!-- <div class="product__details__option__size">
                                    <span>Size:</span>
                                   
                                </div> -->
              <!-- <div class="product__details__option__color">
                                    <span>Color:</span>
                                    
                                </div> -->
            </div>
            <div class="product__details__cart__option">
              <div class="quantity">
                <div class="pro-qty">
                  <input type="text" value="1" />
                </div>
              </div>
              <a href="#" class="primary-btn">add to cart</a>
            </div>
            <div class="product__details__btns__option">
              <a href="#"><i class="fa fa-heart"></i> add to wishlist</a>
              <a href="#"><i class="fa fa-exchange"></i> Add To Compare</a>
            </div>
            <div class="product__details__last__option">
              <h5><span>Guaranteed Safe Checkout</span></h5>
              <img
                src="../../public/img/shop-details/details-payment.png"
                alt=""
              />
              <ul>
                <li><span>SKU:</span> <%= product.sku %></li>
                <li>
                  <span>Categories:</span>
                  <% if (product.categories &&
                  Array.isArray(product.categories)) { %> <%=
                  product.categories.join(', ') %> <% } else { %> No categories
                  available <% } %>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
      <!-- Add tabs and other sections here -->
      <div class="tab-pane active" id="tabs-5" role="tabpanel">
        <div class="product__details__tab__content">
          <div class="product__details__tab__content__item">
            <h5>Product Description</h5>
            <p class="note"></p>
          </div>
          <div class="product__details__tab__content__item">
            <h5>About the Company</h5>
            <p></p>
          </div>
        </div>
      </div>
      <div class="tab-pane" id="tabs-6" role="tabpanel">
        <div class="product__details__tab__content">
          <div class="product__details__tab__content__item">
            <h5>Customer Reviews</h5>
            <p></p>
          </div>
        </div>
      </div>
      <div class="tab-pane" id="tabs-7" role="tabpanel">
        <div class="product__details__tab__content">
          <div class="product__details__tab__content__item">
            <h5>Additional Information</h5>
            <p></p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Shop Details Section End -->

<!-- Related Section Begin -->
<section class="related spad">
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <h3 class="related-title">Related Product</h3>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-3 col-md-6 col-sm-6 col-sm-6">
        <div class="product__item">
          <div
            class="product__item__pic set-bg"
            data-setbg="../../public/img/product/product-1.jpg"
          >
            <span class="label">New</span>
            <ul class="product__hover">
              <li>
                <a href="#"
                  ><img src="../../public/img/icon/heart.png" alt=""
                /></a>
              </li>
              <li>
                <a href="#"
                  ><img src="../../public/img/icon/compare.png" alt="" />
                  <span>Compare</span></a
                >
              </li>
              <li>
                <a href="#"
                  ><img src="../../public/img/icon/search.png" alt=""
                /></a>
              </li>
            </ul>
          </div>
          <div class="product__item__text">
            <h6>Piqué Biker Jacket</h6>
            <a href="#" class="add-cart">+ Add To Cart</a>
            <div class="rating">
              <i class="fa fa-star-o"></i>
              <i class="fa fa-star-o"></i>
              <i class="fa fa-star-o"></i>
              <i class="fa fa-star-o"></i>
              <i class="fa fa-star-o"></i>
            </div>
            <h5>$67.24</h5>
            <div class="product__color__select">
              <label for="pc-1">
                <input type="radio" id="pc-1" />
              </label>
              <label class="active black" for="pc-2">
                <input type="radio" id="pc-2" />
              </label>
              <label class="grey" for="pc-3">
                <input type="radio" id="pc-3" />
              </label>
            </div>
          </div>
        </div>
      </div>
      <div class="col-lg-3 col-md-6 col-sm-6 col-sm-6">
        <div class="product__item">
          <div
            class="product__item__pic set-bg"
            data-setbg="../../public/img/product/product-2.jpg"
          >
            <ul class="product__hover">
              <li>
                <a href="#"
                  ><img src="../../public/img/icon/heart.png" alt=""
                /></a>
              </li>
              <li>
                <a href="#"
                  ><img src="../../public/img/icon/compare.png" alt="" />
                  <span>Compare</span></a
                >
              </li>
              <li>
                <a href="#"
                  ><img src="../../public/img/icon/search.png" alt=""
                /></a>
              </li>
            </ul>
          </div>
          <div class="product__item__text">
            <h6>Piqué Biker Jacket</h6>
            <a href="#" class="add-cart">+ Add To Cart</a>
            <div class="rating">
              <i class="fa fa-star-o"></i>
              <i class="fa fa-star-o"></i>
              <i class="fa fa-star-o"></i>
              <i class="fa fa-star-o"></i>
              <i class="fa fa-star-o"></i>
            </div>
            <h5>$67.24</h5>
            <div class="product__color__select">
              <label for="pc-4">
                <input type="radio" id="pc-4" />
              </label>
              <label class="active black" for="pc-5">
                <input type="radio" id="pc-5" />
              </label>
              <label class="grey" for="pc-6">
                <input type="radio" id="pc-6" />
              </label>
            </div>
          </div>
        </div>
      </div>
      <div class="col-lg-3 col-md-6 col-sm-6 col-sm-6">
        <div class="product__item sale">
          <div
            class="product__item__pic set-bg"
            data-setbg="../../public/img/product/product-3.jpg"
          >
            <span class="label">Sale</span>
            <ul class="product__hover">
              <li>
                <a href="#"
                  ><img src="../../public/img/icon/heart.png" alt=""
                /></a>
              </li>
              <li>
                <a href="#"
                  ><img src="../../public/img/icon/compare.png" alt="" />
                  <span>Compare</span></a
                >
              </li>
              <li>
                <a href="#"
                  ><img src="../../public/img/icon/search.png" alt=""
                /></a>
              </li>
            </ul>
          </div>
          <div class="product__item__text">
            <h6>Multi-pocket Chest Bag</h6>
            <a href="#" class="add-cart">+ Add To Cart</a>
            <div class="rating">
              <i class="fa fa-star"></i>
              <i class="fa fa-star"></i>
              <i class="fa fa-star"></i>
              <i class="fa fa-star"></i>
              <i class="fa fa-star-o"></i>
            </div>
            <h5>$43.48</h5>
            <div class="product__color__select">
              <label for="pc-7">
                <input type="radio" id="pc-7" />
              </label>
              <label class="active black" for="pc-8">
                <input type="radio" id="pc-8" />
              </label>
              <label class="grey" for="pc-9">
                <input type="radio" id="pc-9" />
              </label>
            </div>
          </div>
        </div>
      </div>
      <div class="col-lg-3 col-md-6 col-sm-6 col-sm-6">
        <div class="product__item">
          <div
            class="product__item__pic set-bg"
            data-setbg="../../public/img/product/product-4.jpg"
          >
            <ul class="product__hover">
              <li>
                <a href="#"
                  ><img src="../../public/img/icon/heart.png" alt=""
                /></a>
              </li>
              <li>
                <a href="#"
                  ><img src="../../public/img/icon/compare.png" alt="" />
                  <span>Compare</span></a
                >
              </li>
              <li>
                <a href="#"
                  ><img src="../../public/img/icon/search.png" alt=""
                /></a>
              </li>
            </ul>
          </div>
          <div class="product__item__text">
            <h6>Diagonal Textured Cap</h6>
            <a href="#" class="add-cart">+ Add To Cart</a>
            <div class="rating">
              <i class="fa fa-star-o"></i>
              <i class="fa fa-star-o"></i>
              <i class="fa fa-star-o"></i>
              <i class="fa fa-star-o"></i>
              <i class="fa fa-star-o"></i>
            </div>
            <h5>$60.9</h5>
            <div class="product__color__select">
              <label for="pc-10">
                <input type="radio" id="pc-10" />
              </label>
              <label class="active black" for="pc-11">
                <input type="radio" id="pc-11" />
              </label>
              <label class="grey" for="pc-12">
                <input type="radio" id="pc-12" />
              </label>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- Related Section End -->

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const product =
      /* Extract product ID from URL or another source */
      fetch(`/product/${productId}`)
        .then((response) => response.json())
        .then((data) => {
          // Populate product details
          document.querySelector(".product__details__text h4").innerText =
            data.name;
          document.querySelector(".product__details__text .rating").innerHTML =
            generateRatingHTML(data.rating);
          document.querySelector(
            ".product__details__text h3"
          ).innerHTML = `$${data.price} <span>${data.oldPrice}</span>`;
          document.querySelector(".product__details__text p").innerText =
            data.description;

          // Populate tabs
          document.querySelector(
            "#tabs-5 .product__details__tab__content__item h5"
          ).innerText = "Product Description";
          document.querySelector(
            "#tabs-5 .product__details__tab__content__item p"
          ).innerText = data.description;

          document.querySelector(
            "#tabs-6 .product__details__tab__content__item h5"
          ).innerText = "Customer Reviews";
          document.querySelector(
            "#tabs-6 .product__details__tab__content__item p"
          ).innerHTML = generateReviewsHTML(data.customerReviews);

          document.querySelector(
            "#tabs-7 .product__details__tab__content__item h5"
          ).innerText = "Additional Information";
          document.querySelector(
            "#tabs-7 .product__details__tab__content__item p"
          ).innerText = generateAdditionalInfoHTML(data.additionalInfo);

          // Company information
          document.querySelector(
            "#tabs-5 .product__details__tab__content"
          ).innerHTML += `<h5>About the Company</h5><p>${data.companyInfo}</p>`;

          // Additional fields can be filled in the same manner
        })
        .catch((error) => console.error("Error fetching product data:", error));

    const mainImage = document.getElementById("main-product-image");

    // Handle click events for primary images
    document.querySelectorAll(".nav-link[data-image-url]").forEach((link) => {
      link.addEventListener("click", (event) => {
        event.preventDefault();
        const imageUrl = link.getAttribute("data-image-url");
        mainImage.src = imageUrl;
      });
    });
  });
</script>
<%- include('../../views/partials/user/footer') %>
