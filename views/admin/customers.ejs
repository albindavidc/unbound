<!-- customers.ejs -->

<%- include("../../views/partials/admin/header") %>
<style>
  .userProfileMain {
    width: 100%;
    height: 30%;
    margin: 0 auto;
    background-color: rgb(0, 0, 0);
  }

  .userProfileH1 {
    width: 100%;
    margin: 10px;
    font-family: "Baloo", cursive;
    color: white;
    font-size: 6vw;
  }

  .breadcrumbCls {
    background-color: rgb(0, 0, 0);
  }
</style>

<!-- Customers Header -->
<section>
  <div class="pb-5 text-center">
    <div class="card userProfileMain rounded">
      <h1 class="userProfileH1">Customers</h1>
    </div>
  </div>
</section>
<section class="m-4">
  <header class="card-header text-center mb-20">
    <form action="/admin/users/" method="get" class="d-inline">
      <div
        class="input-group input-group-sm border border-1 border-grey rounded-pill d-flex justify-content-center"
        style="width: 500px; margin-left: 230px"
      >
        <input type="text" class="form-control border-0 rounded-pill" placeholder="Search customers..." name="search" />
        <button class="btn border-0" type="submit">Search</button>
      </div>
    </form>
  </header>
  <div class="card" style="margin: 50px 0">
    <div class="card-body">
      <div class="row">
        <div class="table-responsive">
          <table class="table table-hover">
            <thead>
              <tr>
                <th scope="col"><b>#</b></th>
                <th scope="col"><b>Name</b></th>
                <th scope="col"><b>Email</b></th>
                <th scope="col"><b>Phone No</b></th>
                <th scope="col"><b>Action</b></th>
              </tr>
            </thead>
            <tbody>
              <% for(let i = 0; i < data.length; i++ ) { %>

              <tr>
                <td><%= (currentPage -1) * perPage + i + 1 %></td>
                <td><%= data[i].name %></td>
                <td><%= data[i].email %></td>
                <td><%= data[i].phone %></td>
                <td>
                  <% if (data[i].isBlocked === false) { %>
                  <button class="btn btn-danger pr-5" style="width: 80px">
                    <a href="/admin/blockCustomer?id=<%= data[i]._id %>" class="text-white" style="text-decoration: none">Block</a>
                  </button>
                  <% } else{ %>

                  <button class="btn btn-success pr-5" style="width: 80px">
                    <a href="/admin/unblockCustomer?id=<%= data[i]._id %>" class="text-white" style="text-decoration: none">Unblock</a>
                  </button>
                  <% } %>
                </td>
              </tr>
              <% } %>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
  <div class="mb-5"><%- include('./pagination') %></div>
</section>

<%- include("../../views/partials/admin/footer") %>
